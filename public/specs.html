<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>開発仕様 - AI PM Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header id="header-placeholder" class="app-header"></header>

    <main class="container">
        <div class="static-page-container">
            <h1>「AI Product Manager Dashboard」開発仕様書</h1>
            <p>最終更新日: 2025年8月13日</p>
    
            <h2>1. 概要</h2>
            <p>本アプリケーションは、AIプロダクトマネージャーを目指すユーザーが必要とする、最新のAI関連情報を戦略的な視点から収集・分析し、ダッシュボード形式で提供するWebアプリケーションです。</p>
    
            <h2>2. アーキテクチャ</h2>
            <p>ソースコードをGitHubで管理し、`main`ブランチへのプッシュをトリガーとして、Cloud BuildがテストとCloud Runへのデプロイを自動的に実行します。</p>
            
            <h2>3. 技術スタックと利用Googleサービス</h2>
            <ul>
                <li><strong>ソースコード管理</strong>: GitHub</li>
                <li><strong>CI/CD</strong>: Cloud Build</li>
                <li><strong>バックエンド</strong>: Python, Flask, Gunicorn (Cloud Run上)</li>
                <li><strong>フロントエンド</strong>: HTML, CSS, JavaScript (Firebase Hosting上)</li>
                <li><strong>主要Google Cloudサービス</strong>:
                    <ul>
                        <li><strong>Cloud Run</strong>: バックエンドAPIの実行環境。</li>
                        <li><strong>Firebase Hosting</strong>: フロントエンドのホスティング。</li>
                        <li><strong>Gemini API</strong>: ニュースのPM視点での分析。</li>
                    </ul>
                </li>
            </ul>
    
            <h2>4. 保守・運用手順</h2>
            <h3>4.1. 開発フロー</h3>
            <ol>
                <li>ローカル環境（Cloud Shellなど）でコードを編集・変更します。</li>
                <li>変更内容をGitでコミットします。<code>git add .</code>, <code>git commit -m "変更内容"</code></li>
                <li>GitHubの`main`ブランチにプッシュします。<code>git push origin main</code></li>
                <li>プッシュをトリガーに、Cloud Buildが自動でテストとデプロイを実行します。</li>
                <li>Cloud Buildの履歴画面で、ビルドが成功したことを確認します。</li>
            </ol>

            <h3>4.2. GitHubリポジトリとの連携設定</h3>
            <p>Cloud BuildとGitHubリポジトリを初めて連携させる手順です。</p>
            <ol>
                <li>Google Cloudコンソールの「Cloud Build」ページで「トリガー」を選択します。</li>
                <li>「リポジトリを接続」をクリックし、画面の指示に従ってGitHubアカウントと対象のリポジトリを接続します。</li>
                <li>「トリガーを作成」をクリックし、`main`ブランチへのプッシュをトリガーとして設定します。</li>
                <li>構成ファイルとしてリポジトリ内の<code>cloudbuild.yaml</code>を指定します。</li>
            </ol>

            <h2>5. トラブルシューティング</h2>
            <h3>5.1. Gitの初期設定とプッシュ失敗</h3>
            <p><strong>症状</strong>: <code>git commit</code>でエラーが出る、または<code>git push</code>で認証に失敗する。</p>
            <p><strong>原因と解決策</strong>:</p>
            <ul>
                <li><strong>ユーザー情報未設定</strong>: <code>git commit</code>が失敗する場合、Gitにユーザー情報が設定されていません。以下のコマンドで設定してください。
                    <pre><code>git config --global user.name "あなたの名前"\ngit config --global user.email "あなたのアドレス"</code></pre>
                </li>
                <li><strong>パスワード認証の廃止</strong>: <code>git push</code>で認証に失敗する場合、GitHubはパスワード認証をサポートしていません。代わりに**パーソナルアクセストークン**を使用する必要があります。
                    <ol>
                        <li><a href="https://github.com/settings/tokens" target="_blank" rel="noopener noreferrer">GitHubのトークン設定ページ</a>にアクセスします。</li>
                        <li>「Generate new token (classic)」を選択します。</li>
                        <li>Noteに名前を付け、Expiration（有効期限）を選択し、Scope（権限）で「<strong>repo</strong>」にチェックを入れます。</li>
                        <li>生成されたトークン（<code>ghp_...</code>）をコピーします。</li>
                        <li><code>git push</code>実行時にパスワードを求められたら、この**トークンを貼り付け**てください。</li>
                    </ol>
                </li>
            </ul>
            
            <h3>5.2. Cloud Shellでの認証エラー (localhost接続拒否)</h3>
            <p><strong>症状</strong>: <code>gcloud auth login</code> や <code>firebase login</code> を実行した際、ブラウザで<code>localhost</code>への接続が拒否され、認証が完了できない。</p>
            <p><strong>原因</strong>: Cloud Shellはクラウド上のリモート環境であり、ローカルPCのブラウザから直接<code>localhost</code>としてアクセスできないためです。</p>
            <p><strong>解決策</strong>: <code>localhost</code>を使用しない認証オプションをコマンドに追加します。</p>
            <pre><code>gcloud auth login --no-auth-browser\nfirebase login --no-localhost</code></pre>
            </div>
    </main>

    <script src="app.js"></script>
</body>
</html>